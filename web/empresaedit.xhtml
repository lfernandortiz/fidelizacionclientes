<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">#{empresaBeanEdit.selectedEmpresa.idempresa == 0 ? 'Crear' : 'Editar'} Empresa</ui:define>

    <ui:define name="content">    
        <h:form id="crearempresaform">
       <!--  <p:growl id="growl" showDetail="true" sticky="true" />  -->
        <p:messages id="crearempresamessage"  autoUpdate="true" closable="true" />
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card">   
                                              
                            <h1><i class="fa fa-building-o"></i> Datos de la empresa </h1>
                            
							<p:panelGrid columns="4" id="detailempresa"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
								layout="grid" styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent;">
								
								<p:outputLabel for="nitcrearid" value="Nit Empresa" />
								<p:inputText id="nitcrearid" value="#{empresaBeanEdit.selectedEmpresa.nit}"
									required="true" />

								<p:outputLabel for="nombrecrearid" value="Nombre Empresa" />
								<p:inputText id="nombrecrearid"
									value="#{empresaBeanEdit.selectedEmpresa.nombreEmpresa}" required="true" />

								<p:outputLabel for="dircrearid" value="Direccion" />
								<p:inputText id="dircrearid" value="#{empresaBeanEdit.selectedEmpresa.direccion}"
									required="true" />

								<p:outputLabel for="telcrearid" value="Telefono" />
								<p:inputText id="telcrearid" value="#{empresaBeanEdit.selectedEmpresa.telefono}"
									required="true" />

								<p:outputLabel for="emialnoticreid" value="Email Notificaciones" />
								<p:inputText id="emialnoticreid"
									value="#{empresaBeanEdit.selectedEmpresa.emailNotificaciones}" required="true" />

								<p:outputLabel for="emailcrearid" value="Email" />
								<p:inputText id="emailcrearid" value="#{empresaBeanEdit.selectedEmpresa.email}" />
								
							</p:panelGrid>
							<p:separator style="height:10px"/>
							<h2 class="ash1"><i class="fa fa-circle" aria-hidden="true"></i> Condiciones del programa de acumulaci贸n</h2>
							<p:panelGrid columns="4" id="contratopanel"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
								layout="grid" styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent;">
								
								<p:outputLabel for="fechainiid" value="Fecha inicio" />
									<p:calendar id="fechainiid" value="#{empresaBeanEdit.contrato.fechainicio}"
										pattern = "dd/MM/yyyy"
										required="true"
										timeZone=""
										navigator="true" popupIconOnly="false" mode="popup"
										showOn="button" yearRange="c-1:c+5">
										<f:convertDateTime pattern = "dd/MM/yyyy" />
								</p:calendar>
								
								<p:outputLabel for="fechafinid" value="Fecha Fin" />
									<p:calendar id="fechafinid" value="#{empresaBeanEdit.contrato.fechafin}"
										pattern = "dd/MM/yyyy"
										required="true"
										navigator="true" popupIconOnly="false" mode="popup"
										showOn="button" yearRange="c-1:c+5">
										<f:convertDateTime pattern = "dd/MM/yyyy" />
								</p:calendar>
								
								<p:outputLabel for="baseid" value="Base Acumulacion" />
								<p:inputText id="baseid"
									value="#{empresaBeanEdit.contrato.basegravable}" />
								
								<p:outputLabel for="factorid" value="Factor Puntos" />
								<p:inputText id="factorid"
									value="#{empresaBeanEdit.contrato.factorpuntos}" />
								
								<p:outputLabel for="minredimibleid" value="Minimo valor redimible" />
								<p:inputText id="minredimibleid"
									value="#{empresaBeanEdit.contrato.vrminimoredimir}" />
									
								<p:outputLabel for="codpromoid" value="Codigo Promocional" />
								<p:inputText id="codpromoid" value="#{empresaBeanEdit.selectedEmpresa.codigoprom}"
									 />
								
								<p:outputLabel for="redenid" value="Redencion en Sucursal" />
        						<p:selectBooleanCheckbox id="redenid" value="#{empresaBeanEdit.redensionSuc}" />
								
								<p:outputLabel for="smsid" value="Envio sms" />
        						<p:selectBooleanCheckbox id="smsid" value="#{empresaBeanEdit.envioSms}" />
 								
 								<p:outputLabel for="emailid" value="Envio email" />
        						<p:selectBooleanCheckbox id="emailid" value="#{empresaBeanEdit.envioEmail}" />
        						        						
							</p:panelGrid>							
							
							<p:separator style="height:10px"/>
							
							<!-- Panel de configuracion de correo -->
							<h2 class="ash1"><i class="fa fa-envelope-o" aria-hidden="true"></i> Configuraci贸n cuenta correo electr贸nico central</h2>
							<p:panelGrid columns="4" id="detailemial"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
								layout="grid" styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent;">
								
								<p:outputLabel for="smtpuserid" value="SMTP User (smtp.user)" styleClass="labelImportant"/>
								<p:inputText id="smtpuserid" value="#{empresaBeanEdit.paramEmailSelected.smtpUser}"/>
								
								<p:outputLabel for="passwordid" value="Password  (password)" styleClass="labelImportant"/>
								<p:inputText id="passwordid" value="#{empresaBeanEdit.paramEmailSelected.smtpPassword}" styleClass="inputPassword"/>
																
								<p:outputLabel for="smtphostid" value="SMTP Host (smtp.host)" styleClass="labelImportant"/>
								<p:inputText id="smtphostid" value="#{empresaBeanEdit.paramEmailSelected.smtpHost}"/>
								
								<p:outputLabel for="smtpportid" value="SMTP Port (smtp.port)" styleClass="labelImportant"/>
								<p:inputText id="smtpportid" value="#{empresaBeanEdit.paramEmailSelected.smtpPort}"/>
																
								<p:outputLabel for="smtpauthid" value="SMTP Auth (smtp.auth)" styleClass="labelImportant"/>
								<p:inputText id="smtpauthid" value="#{empresaBeanEdit.paramEmailSelected.smtpAuth}"/>
								
								<p:outputLabel for="protocoid" value="Transport Protocol  (transport.protocol)" styleClass="labelImportant"/>
								<p:inputText id="protocoid" value="#{empresaBeanEdit.paramEmailSelected.transportprotocol}"/>
								
								<p:outputLabel for="hostid" value="Host" />
								<p:inputText id="hostid" value="#{empresaBeanEdit.paramEmailSelected.host}"/>
								
								<p:outputLabel for="portid" value="Port" />
								<p:inputText id="portid" value="#{empresaBeanEdit.paramEmailSelected.port}"/>
								
								<p:outputLabel for="smtpsockportid" value="SMTP Socket Factory Port" />
								<p:inputText id="smtpsockportid" value="#{empresaBeanEdit.paramEmailSelected.smtp_socketFactory_port}"/>
								
								<p:outputLabel for="smtpsockclassid" value="SMTP Socket Factory Class" />
								<p:inputText id="smtpsockclassid" value="#{empresaBeanEdit.paramEmailSelected.smtp_socketFactory_class}"/>
								
								<p:outputLabel for="userid" value="User (user)"/>
								<p:inputText id="userid" value="#{empresaBeanEdit.paramEmailSelected.user}"/>
													
								<p:outputLabel for="smtppasswordid" value="Password" />
								<p:inputText id="smtppasswordid" value="#{empresaBeanEdit.paramEmailSelected.password}" styleClass="inputPassword"/>
																
								<p:outputLabel for="storeprotid" value="Store Protocol" />
								<p:inputText id="storeprotid" value="#{empresaBeanEdit.paramEmailSelected.storeProtocol}"/>
								
								<p:outputLabel for="smtpenableid" value="SMTP starttls Enable " />
								<p:inputText id="smtpenableid" value="#{empresaBeanEdit.paramEmailSelected.smtpStarttlsEnable}"/>
								
								<p:outputLabel for="archivedid" value="Folder Archived" />
								<p:inputText id="archivedid" value="#{empresaBeanEdit.paramEmailSelected.archived}"/>
								
								<p:outputLabel for="propositoid" value="Proposito" />
								<p:inputText id="propositoid" value="#{empresaBeanEdit.paramEmailSelected.proposito}"/>
								
							</p:panelGrid>
							
							<div class="buttonssms">
							<p:panelGrid columns="4" id="buttonsEmail"
								columnClasses="ui-grid-col-3,"
								layout="grid" styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent; ">
								
								<p:commandButton value="Enviar Emial Prueba " id="testEmailid"
												 styleClass="aqua-button"
												 oncomplete="PF('testEmail').show()"
												 update="crearempresaform"/>
						
						  	</p:panelGrid>
							</div>
							
							<p:separator style="height:10px"/>
							
							<!-- Panel de configuracion de correo -->
							<h2 class="ash1"><i class="fa fa-commenting-o" aria-hidden="true"></i> Configuraci贸nn credenciales proveedor SMS</h2>
							
							
							<p:separator style="height:10px"/>
							<div class="buttonssms">
								<p:panelGrid columns="6" id="buttons"
								columnClasses="ui-grid-col-2,"
								layout="grid" styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent; ">	
										
								<p:commandButton value="Crear" id="crearnuevaid"
												 action="#{empresaBeanEdit.crearEmpresa()}" 
												 update="crearempresaform"
												 rendered="#{empresaBeanEdit.selectedEmpresa.idempresa == null || empresaBeanEdit.selectedEmpresa.idempresa == 0}" />
											 
								<p:commandButton value="Actualizar" id="actualizarid"
												 action="#{empresaBeanEdit.actualizarEmpresa()}"
												 update="crearempresaform"
												 rendered="#{empresaBeanEdit.selectedEmpresa.idempresa != null&amp;&amp;empresaBeanEdit.selectedEmpresa.idempresa != 0}" />
								 
								<p:commandButton value="Limpiar" id="limpiarid"
												 action="#{empresaBeanEdit.limpiarEdit()}"
												 process="@this"
												 update="crearempresaform" 
												 rendered="#{empresaBeanEdit.selectedEmpresa.idempresa == null || empresaBeanEdit.selectedEmpresa.idempresa == 0}" />
												 
								<p:commandButton value="Cancelar" 
												 id="cancelarnuevaid"
												 action="#{empresaBeanEdit.cancelar()}" 
												 process="@this"
												 update="detailempresa" />
												 
								<p:commandButton value="Volver" 
												 id="volverid"
												 action="#{empresaBeanEdit.cancelar()}" 
												 process="@this"
												 update="detailempresa" />									
							</p:panelGrid>
							</div>
							
							<h:commandLink class="ayudamodulolink">
							<h4 class="ayudamodulo"><i class="fa fa-info-circle" aria-hidden="true"></i> Ayuda sobre este modulo.</h4>
							</h:commandLink>
						</div> <!-- end car -->
                    </div> <!-- end ui-g-12 -->
                </div> <!-- end ui-g -->
            </div>  <!-- end ui-fluid -->     
            
            
            <!-- Cuadro de dialogo crear SMS -->
			<p:dialog header="" widgetVar="testEmail" modal="true" id="dialogemail"
				showEffect="fade" hideEffect="fade" resizable="false"
				style="min-width: 30em!important;">
				<div class="ui-fluid">
					<div class="ui-g">
						<div class="ui-g-12">
							
								<h1>
									<i class="fa fa-envelope-o" aria-hidden="true"></i> Enviar Email de Prueba a:
								</h1>					
														
							<p:spacer height="10px" />
							<p:panelGrid columns="1" id="emailTestFormid"
								columnClasses="ui-grid-col-12,ui-grid-col-12" layout="grid"
								styleClass="ui-panelgrid-blank"
								style="border:0px none; background-color:transparent;">
								
								<p:outputLabel for="diremailid" value="Direccion de email:" />
								<p:inputText id="diremailid" maxlength="44"
									value="#{empresaBeanEdit.emailTest}" />	
										
							</p:panelGrid>
							<p:spacer height="10px" />
							<div class="buttonssms">
								<p:panelGrid columns="3" id="buttonsecrearid"
									columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4"
									layout="grid" styleClass="ui-panelgrid-blank"
									style="border:0px none;  background-color:transparent; ">

									<p:commandButton value="Cancelar" 
													 id="cancelarid" 
													 oncomplete="PF('testEmail').hide()"
													 update="emailTestFormid" 
													 action="#{empresaBeanEdit.cancelarTest()}" />
									
									<p:commandButton value="Enviar" 
													 id="enviarEmailTestid" 
													 styleClass="navy-button"
													 update="emailTestFormid"
													 action="#{empresaBeanEdit.enviarEmailTest()}"/>
									
									
								</p:panelGrid>
							</div>
						</div>
						<!-- end ui-g-12 -->
					</div>
					<!-- end ui-g -->
				</div>
				<!-- end ui-fluid -->
			</p:dialog>
			
			
            
            
        </h:form>		
		<script type="text/javascript">
            //<![CDATA[
            	console.log("@lfernandortiz :-)");
            	//se usa para anadir una clase de un elemento hijo contenedor del framework Primefaces
            	/* $(document.getElementById("crearempresaform:buttons"))
            						.children().children().addClass("align-right") ; */

            	/* $(document.getElementById("crearempresaform:buttonsEmail"))
									.children().children().addClass("align-right") ; */

            //]]>  
        </script>
        
    </ui:define>
</ui:composition>